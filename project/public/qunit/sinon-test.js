!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.sinonTest=e()}(this,function(){"use strict";function n(n){return void 0===n.createSandbox&&!!n.sandbox&&"object"==typeof n.sandbox&&"function"==typeof n.sandbox.create}function e(n,e,t){if(e){if(n.restore(),t)return;throw e}n.verifyAndRestore()}function t(n,t){return t&&i.isPromise(t)?t.then(function(t){return e(n),t},function(t){e(n,t||Error("Promise rejected with no/falsy error"))}):(e(n),t)}function o(n,o,r){if(o&&i.isPromise(o)){if(!r)return void t(n,o);e(n,Error("Your test should take a callback *or* return a promise. It should not do both."))}r||e(n)}function r(n,e){return s.configure(n,e)}var i={isPromise:function(n){return"object"==typeof n&&"function"==typeof n.then},isSinon:function(e){return!!e&&"object"==typeof e&&(n(e)||"function"==typeof e.createSandbox)}},c={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},u=function(n){var e,t={};n=n||{};for(e in c)c.hasOwnProperty(e)&&(t[e]=n.hasOwnProperty(e)?n[e]:c[e]);return t},f=Array.prototype.slice,s={configure:function(n,r){function c(n,t,o,i){(r=u(r)).injectInto=r.injectIntoThis&&n||r.injectInto;var c,f=s(r),a=t.length&&t[t.length-1];"function"==typeof a&&(t[t.length-1]=function(n){e(f,n,!0),a(n)});try{c=o.apply(n,t.concat(f.args))}catch(n){e(f,n)}return i(f,c,"function"==typeof a)}if(!i.isSinon(n))throw new TypeError("expected sinon object");var s=n.createSandbox||n.sandbox.create;return function(n){var e=typeof n;if("function"!==e)throw new TypeError("sinon.test needs to wrap a test function, got "+e);return n.length?function(e){return c(this,f.call(arguments),n,o)}:function(){return c(this,f.call(arguments),n,t)}}}};return r.configureTest=function(n,e){return console.log("sinonTest.configureTest is deprecated and will be removed from the public API in a future version of sinon-test"),s.configure(n,e)},r});
